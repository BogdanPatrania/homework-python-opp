<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login | Math Microservice</title>
    <script>
        if (localStorage.getItem("darkMode") === "true") {
            document.documentElement.classList.add("dark-mode");
        }
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2721/2721292.png" type="image/png">
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #ff6f61, #ffb347);
            --card-bg: #ffffff;
            --text-color: #212529;
            --btn-color: #d63384;
            --bar-bg: #fff8f0;
        }
        html.dark-mode {
            --bg-gradient: linear-gradient(135deg, #141e30, #243b55);
            --card-bg: #1e1e1e;
            --text-color: #f8f9fa;
            --btn-color: #6f42c1;
            --bar-bg: #23272e;
        }
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            background: var(--bg-gradient);
            color: var(--text-color);
            transition: background 0.5s, color 0.5s;
        }
        .card {
            background-color: var(--card-bg);
            color: var(--text-color);
            border: none;
            border-radius: 1rem;
        }
        .form-label {
            font-weight: 600;
        }
        .btn-primary {
            background-color: var(--btn-color);
            border-color: var(--btn-color);
        }
        .btn-primary:hover {
            opacity: 0.9;
        }
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .top-buttons .btn {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            border: 1px solid #e0e0e0;
            background-color: #f8f9fa;
            color: #212529;
            transition: background 0.2s, color 0.2s, border 0.2s;
        }
        .top-buttons .btn:hover, .top-buttons .btn:focus {
            background-color: #e9ecef;
            color: #d63384;
            border-color: #d63384;
        }
        html.dark-mode .top-buttons .btn {
            background-color: #23272e;
            color: #f8f9fa;
            border: 1px solid #444950;
        }
        html.dark-mode .top-buttons .btn:hover, html.dark-mode .top-buttons .btn:focus {
            background-color: #343a40;
            color: #6f42c1;
            border-color: #6f42c1;
        }
    </style>
    <script>
        function toggleDarkMode() {
            document.documentElement.classList.toggle("dark-mode");
            const isDark = document.documentElement.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDark ? "true" : "false");
        }
    </script>
</head>
<body>
    <!-- Top-right sticky button bar -->
    <div class="top-buttons d-flex flex-row gap-2 justify-content-end">
        <button class="btn btn-sm btn-light" onclick="toggleDarkMode()">Toggle Dark Mode</button>
        <a href="/" class="btn btn-sm btn-light">Back to Calculator</a>
        <a href="/history" class="btn btn-sm btn-light">View History</a>
        <a href="/tasks" class="btn btn-sm btn-light">View Tasks</a>
        <a href="/logout" class="btn btn-sm btn-light">Logout</a>
    </div>
    <div class="container py-5 d-flex flex-column justify-content-center min-vh-100">
        <div class="row justify-content-center">
            <div class="col-md-5">
                <div class="card p-4 shadow-lg fade-in">
                    <h2 class="mb-4 text-center fw-bold">Login</h2>
                    <form method="post" action="/login" class="d-flex flex-column gap-3">
                        <div>
                            <label for="username" class="form-label">Username</label>
                            <input name="username" id="username" type="text" class="form-control" placeholder="Username" required>
                        </div>
                        <div>
                            <label for="password" class="form-label">Password</label>
                            <input name="password" id="password" type="password" class="form-control" placeholder="Password" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Login</button>
                    </form>
                    {% if error %}
                        <div class="alert alert-danger mt-3 text-center">{{ error }}</div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</body>